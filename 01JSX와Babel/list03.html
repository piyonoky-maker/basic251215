<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ToList</title>
    <!-- 컴포넌트/상태 관리하는 함수 지원-->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <!-- ReactDOM: React컴포넌트를 실제 HTML DOM 그려주는 역활-->
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <!-- 바벨: JSX를 JS로 변환해줌-->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <!-- 리액트가 그리는 화면이 들어갈 곳 -->
    <div id="root"></div>
    <script type="text/babel">  
        const root = document.querySelector("#root")
        //초기  데이터 준비
        const todos = [
            {id:1, value: '방청소'},
            {id:2, value: '빨래하기'},
            {id:3, value: '조깅하기'},
        ]

        //사용자 저의 태그이다 - 컴포넌트 
        //filter가 배열을 변경하면 상태가 변함
        // 객체배열이 변하면 App 함수가 새로 만들어짐
        const App = () => {
            //상태로 목록을 관리해 본다 - 상태가 바뀌면 다시 그린다
            //items: 현재 화면에 보여줄 목록(상태)
            //화면에 보인는 값은 state로 관리 함
            //state가 바뀌면 React가 화면을 자동으로 다시 그린다 (re-render
            //setItems함수로 업데이트 가능함
            const [items, setItems] = React.useState(todos);        //여기서 HOOK처리가 일어남
            const doneClick = (todo) => {
                console.log('doneClick');
                console.log(todo);
                
                //getQuerySelector()
                //console.log(items.filter(item => item !== todo));
                setItems((items) => items.filter(item => item !== todo))
            }
{/* JSX 주석 형태임 */}            
/*
 주의 : 버튼 클릭시 함수를 실행해야 하므로 익명함수로 감싸서 전달해야 함
 만일 onClick={doneClick(item)}으로 하면 렌더링이 되는 순간 바로 실행됨
 클릭이 아니라 즉시 실행되어 목록에 아이템이 안보임
*/
            return (
                <>
                    <h2>ToDo List</h2>
                    {items.map((item, index) => (
                        <div key={item.id}>
                            <button onClick={()=>doneClick(item)}>{item.id}{item.value}</button>
                        </div>
                        ))
                    }
                </>
            )
        }
        ReactDOM.createRoot(root).render(<App />)
    </script>
</body>
</html>
